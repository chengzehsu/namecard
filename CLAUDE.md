# åç‰‡ç®¡ç† LINE Bot - Claude é–‹ç™¼è¨˜éŒ„

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹åŸºæ–¼ LINE Bot çš„æ™ºèƒ½åç‰‡ç®¡ç†ç³»çµ±ï¼Œä½¿ç”¨ Google Gemini AI è­˜åˆ¥åç‰‡å…§å®¹ï¼Œä¸¦è‡ªå‹•å­˜å…¥ Notion è³‡æ–™åº«ã€‚æ”¯æ´å–®å¼µè™•ç†å’Œæ‰¹æ¬¡è™•ç†æ¨¡å¼ï¼Œä¸¦æ•´åˆ GitHub Actions å¯¦ç¾ CI/CD è‡ªå‹•åŒ–å’Œ Claude Code AI é©…å‹•é–‹ç™¼ã€‚

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
LINE Bot Webhook (Flask)
    â†“
åç‰‡åœ–ç‰‡è™•ç† (Google Gemini AI)
    â†“
åœ°å€æ­£è¦åŒ–è™•ç† (Address Normalizer) ğŸ†•
    â†“
è³‡æ–™å­˜å„² (Notion API)
    â†“
æ‰¹æ¬¡ç‹€æ…‹ç®¡ç† (å…§å­˜ç®¡ç†)
    â†“
GitHub Actions CI/CD Pipeline
    â†“
Claude Code AI è‡ªå‹•åŒ– (åŠŸèƒ½é–‹ç™¼ã€æ¸¬è©¦ã€éƒ¨ç½²)
```

## ğŸ“‚ æª”æ¡ˆçµæ§‹

```
namecard/
â”œâ”€â”€ app.py                          # Flask ä¸»æ‡‰ç”¨ï¼ŒLINE Bot webhook è™•ç†
â”œâ”€â”€ config.py                       # é…ç½®æ–‡ä»¶ç®¡ç†
â”œâ”€â”€ name_card_processor.py          # Gemini AI åç‰‡è­˜åˆ¥è™•ç†å™¨
â”œâ”€â”€ notion_manager.py               # Notion è³‡æ–™åº«æ“ä½œç®¡ç†å™¨
â”œâ”€â”€ batch_manager.py                # æ‰¹æ¬¡è™•ç†ç‹€æ…‹ç®¡ç†å™¨
â”œâ”€â”€ address_normalizer.py           # åœ°å€æ­£è¦åŒ–è™•ç†å™¨ (NEW)
â”œâ”€â”€ pr_creator.py                   # PR è‡ªå‹•å‰µå»ºåŠŸèƒ½
â”œâ”€â”€ test_new_webhook.py             # Webhook æ¸¬è©¦å·¥å…·
â”œâ”€â”€ test_address_normalizer.py      # åœ°å€æ­£è¦åŒ–æ¸¬è©¦ (NEW)
â”œâ”€â”€ test_simple_error_handling.py   # LINE Bot API éŒ¯èª¤è™•ç†æ¸¬è©¦ (NEW) ğŸ†•
â”œâ”€â”€ line_bot_handler.py             # LINE Bot API éŒ¯èª¤è™•ç†åŒ…è£å™¨ (NEW) ğŸ†•
â”œâ”€â”€ format_code.sh                  # ä»£ç¢¼æ ¼å¼åŒ–è…³æœ¬ (NEW) ğŸ†•
â”œâ”€â”€ .pre-commit-config.yaml         # Pre-commit hooks é…ç½® (NEW) ğŸ†•
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci-cd.yml               # CI/CD è‡ªå‹•åŒ–æµç¨‹ (å«è‡ªå‹•æ ¼å¼åŒ–) ğŸ†•
â”‚       â””â”€â”€ claude-code.yml         # Claude Code AI è‡ªå‹•åŒ–
â”œâ”€â”€ requirements.txt                # Python ä¾è³´åˆ—è¡¨
â”œâ”€â”€ Procfile                        # Heroku éƒ¨ç½²é…ç½®
â”œâ”€â”€ railway_app.py                  # Railway éƒ¨ç½²å…¥å£
â””â”€â”€ CLAUDE.md                       # æœ¬æ–‡ä»¶ (é–‹ç™¼æŒ‡å°åŸå‰‡)
```

## ğŸ”§ æ ¸å¿ƒçµ„ä»¶

### 1. LINE Bot è™•ç†å™¨ (app.py)
- **åŠŸèƒ½**: æ¥æ”¶ LINE webhookï¼Œè™•ç†æ–‡å­—å’Œåœ–ç‰‡è¨Šæ¯
- **ç«¯é»**: 
  - `POST /callback` - LINE webhook å›èª¿
  - `GET /health` - å¥åº·æª¢æŸ¥
  - `GET /test` - æœå‹™æ¸¬è©¦
  - `GET /api-status` - API ç‹€æ…‹ç›£æ§ ğŸ†•
- **ç‰¹è‰²**: æ”¯æ´æ‰¹æ¬¡æ¨¡å¼å’Œå–®å¼µæ¨¡å¼ï¼Œå…§å»º API éŒ¯èª¤è™•ç† ğŸ†•

### 2. åç‰‡è­˜åˆ¥è™•ç†å™¨ (name_card_processor.py)
- **AI æ¨¡å‹**: Google Gemini AI
- **è­˜åˆ¥æ¬„ä½**:
  - å§“å (name)
  - å…¬å¸åç¨± (company)
  - éƒ¨é–€ (department)
  - è·ç¨± (title)
  - æ±ºç­–å½±éŸ¿åŠ› (decision_influence)
  - Email (email)
  - é›»è©± (phone)
  - åœ°å€ (address) - **æ•´åˆåœ°å€æ­£è¦åŒ–** ğŸ†•
  - è¯ç¹«ä¾†æº (contact_source)
  - å‚™è¨» (notes)
- **æ ¸å¿ƒåŠŸèƒ½** ğŸ†•:
  - **å¤šåç‰‡æª¢æ¸¬**: è‡ªå‹•è­˜åˆ¥ä¸€å¼µåœ–ç‰‡ä¸­çš„å¤šå¼µåç‰‡
  - **å“è³ªè©•ä¼°**: æ¯å¼µåç‰‡çš„ä¿¡å¿ƒåº¦è¨ˆç®—å’Œæ¸…æ™°åº¦åˆ†æ
  - **æ™ºèƒ½å»ºè­°**: æ ¹æ“šè­˜åˆ¥å“è³ªæä¾›è™•ç†å»ºè­°
  - **åœ°å€æ­£è¦åŒ–**: å°ç£åœ°å€æ¨™æº–åŒ–è™•ç†
  - **API å‚™ç”¨æ©Ÿåˆ¶**: ä¸»è¦ API é¡åº¦ä¸è¶³æ™‚è‡ªå‹•åˆ‡æ›åˆ°å‚™ç”¨ API Key ğŸ†•
  - **å‘å¾Œå…¼å®¹**: ä¿æŒèˆ‡èˆŠç‰ˆå–®ä¸€åç‰‡è™•ç†çš„å®Œå…¨å…¼å®¹

### 3. Notion è³‡æ–™åº«ç®¡ç†å™¨ (notion_manager.py)
- **åŠŸèƒ½**: å»ºç«‹ Notion é é¢è¨˜éŒ„
- **ç‰¹è‰²**: 
  - è‡ªå‹•æ¬„ä½é¡å‹é©—è­‰ (email/phone_number)
  - å®¹éŒ¯è™•ç† (æ ¼å¼éŒ¯èª¤æ™‚å»ºç«‹å‚™è¨»æ¬„ä½)
  - åœ–ç‰‡è™•ç†è³‡è¨Šè¨˜éŒ„
  - æ‰‹å‹•è²¼åœ–æç¤ºå€å¡Š
  - **åœ°å€é©—è­‰å’Œè™•ç†è³‡è¨Š** ğŸ†•
    - å°ç£åœ°å€æ ¼å¼é©—è­‰
    - åœ°å€æ­£è¦åŒ–å‰å¾Œå°æ¯”é¡¯ç¤º
    - åœ°å€ä¿¡å¿ƒåº¦å’Œè™•ç†ç‹€æ…‹å±•ç¤º

### 4. æ‰¹æ¬¡è™•ç†ç®¡ç†å™¨ (batch_manager.py)
- **åŠŸèƒ½**: ç®¡ç†ç”¨æˆ¶æ‰¹æ¬¡è™•ç†ç‹€æ…‹
- **ç‰¹è‰²**:
  - å¤šç”¨æˆ¶ä¸¦ç™¼æ”¯æ´
  - è‡ªå‹•éæœŸæ©Ÿåˆ¶ (10åˆ†é˜)
  - å³æ™‚é€²åº¦è¿½è¹¤
  - çµ±è¨ˆå ±å‘Šç”Ÿæˆ

### 5. åœ°å€æ­£è¦åŒ–è™•ç†å™¨ (address_normalizer.py) ğŸ†•
- **åŠŸèƒ½**: å°ç£åœ°å€æ¨™æº–åŒ–å’Œé©—è­‰
- **ç‰¹è‰²**:
  - ç¸£å¸‚åç¨±çµ±ä¸€åŒ– (å°åŒ— â†’ å°åŒ—å¸‚)
  - å€åŸŸåç¨±æ¨™æº–åŒ– (ä¿¡ç¾© â†’ ä¿¡ç¾©å€)
  - é“è·¯æ®µæ•¸ä¸­æ–‡åŒ– (5æ®µ â†’ äº”æ®µ)
  - æ¨“å±¤æ ¼å¼çµ±ä¸€ (1F â†’ 1æ¨“, B1 â†’ åœ°ä¸‹1æ¨“)
  - åœ°å€çµ„ä»¶è§£æå’Œé‡å»º
  - ä¿¡å¿ƒåº¦è©•ä¼°å’Œè­¦å‘Šæç¤º
  - å°ç£åœ°å€æ ¼å¼é©—è­‰

### 6. å¤šåç‰‡è™•ç†å™¨ (multi_card_processor.py) ğŸ†•
- **åŠŸèƒ½**: å”èª¿å¤šå¼µåç‰‡çš„è­˜åˆ¥ã€åˆ†æå’Œè™•ç†å·¥ä½œæµç¨‹
- **ç‰¹è‰²**:
  - **æ™ºèƒ½æ±ºç­–**: æ ¹æ“šåç‰‡æ•¸é‡å’Œå“è³ªè‡ªå‹•æ±ºå®šè™•ç†æ–¹å¼
  - **å“è³ªåˆ†æ**: è©•ä¼°æ¯å¼µåç‰‡çš„è­˜åˆ¥ä¿¡å¿ƒåº¦å’Œå®Œæ•´æ€§
  - **ç”¨æˆ¶å¼•å°**: ç”Ÿæˆæ¸…æ™°çš„ç”¨æˆ¶é¸æ“‡ç•Œé¢å’Œå»ºè­°
  - **æ‰¹æ¬¡æ•´åˆ**: èˆ‡ç¾æœ‰æ‰¹æ¬¡è™•ç†æ¨¡å¼ç„¡ç¸«æ•´åˆ
  - **éŒ¯èª¤è™•ç†**: å®Œå–„çš„ç•°å¸¸è™•ç†å’Œé™çº§æœºåˆ¶

### 7. ç”¨æˆ¶äº¤äº’è™•ç†å™¨ (user_interaction_handler.py) ğŸ†•
- **åŠŸèƒ½**: ç®¡ç†å¤šåç‰‡è™•ç†éç¨‹ä¸­çš„ç”¨æˆ¶äº¤äº’å’Œæœƒè©±ç‹€æ…‹
- **ç‰¹è‰²**:
  - **æœƒè©±ç®¡ç†**: è‡ªå‹•ç®¡ç†ç”¨æˆ¶é¸æ“‡æœƒè©±ï¼Œæ”¯æ´è¶…æ™‚å’Œé‡è©¦
  - **æ™ºèƒ½è§£æ**: æ”¯æ´æ•¸å­—é¸æ“‡å’Œè‡ªç„¶èªè¨€åŒ¹é…
  - **ç”¨æˆ¶é«”é©—**: ç”Ÿæˆå‹å¥½çš„é¸é …ç•Œé¢å’Œæ“ä½œæŒ‡å°
  - **ç‹€æ…‹è¿½è¹¤**: å®Œæ•´çš„æœƒè©±ç‹€æ…‹ç®¡ç†å’Œæ¸…ç†æ©Ÿåˆ¶
  - **å¤šç”¨æˆ¶æ”¯æ´**: ä¸¦ç™¼è™•ç†å¤šå€‹ç”¨æˆ¶çš„äº¤äº’æœƒè©±

### 8. LINE Bot API éŒ¯èª¤è™•ç†åŒ…è£å™¨ (line_bot_handler.py) ğŸ†•
- **åŠŸèƒ½**: æä¾›å¥å£¯çš„ LINE Bot API éŒ¯èª¤è™•ç†å’Œé™ç´šæœå‹™
- **ç‰¹è‰²**:
  - **API é…é¡ç›£æ§**: è‡ªå‹•æª¢æ¸¬æœˆåº¦é…é¡ç”¨é‡å’Œé‡ç½®æ™‚é–“
  - **æ™ºèƒ½é‡è©¦æ©Ÿåˆ¶**: æ ¹æ“šéŒ¯èª¤é¡å‹è‡ªå‹•é‡è©¦æˆ–ç›´æ¥å¤±æ•—
  - **é™ç´šæœå‹™**: ç•¶ API ä¸å¯ç”¨æ™‚æä¾›å‹å¥½çš„ç”¨æˆ¶æç¤º
  - **éŒ¯èª¤çµ±è¨ˆ**: è¿½è¹¤å„ç¨® API éŒ¯èª¤çš„ç™¼ç”Ÿé »ç‡
  - **ç‹€æ…‹ç›£æ§**: æä¾›è©³ç´°çš„æœå‹™ç‹€æ…‹å ±å‘Š
- **éŒ¯èª¤è™•ç†**:
  - `429 é…é¡è¶…é™` â†’ è¨­ç½®é…é¡ç‹€æ…‹ï¼Œç­‰å¾…ä¸‹æœˆé‡ç½®
  - `429 é€Ÿç‡é™åˆ¶` â†’ è‡ªå‹•é‡è©¦æ©Ÿåˆ¶ï¼Œå»ºè­°ç­‰å¾…æ™‚é–“
  - `400/401/403` â†’ å®¢æˆ¶ç«¯éŒ¯èª¤ï¼Œä¸é‡è©¦ï¼Œè¨˜éŒ„éŒ¯èª¤
  - `500+` â†’ ä¼ºæœå™¨éŒ¯èª¤ï¼Œè‡ªå‹•é‡è©¦ï¼Œå»¶é²è™•ç†
- **å®‰å…¨ API èª¿ç”¨**:
  - `safe_reply_message()` - å®‰å…¨å›è¦†è¨Šæ¯
  - `safe_push_message()` - å®‰å…¨æ¨æ’­è¨Šæ¯  
  - `safe_get_message_content()` - å®‰å…¨ç²å–å…§å®¹

### 9. PR è‡ªå‹•å‰µå»ºå™¨ (pr_creator.py)
- **åŠŸèƒ½**: è‡ªå‹•å‰µå»º GitHub Pull Request
- **ç‰¹è‰²**:
  - è‡ªç„¶èªè¨€éœ€æ±‚è§£æ
  - è‡ªå‹•ä»£ç¢¼ç”Ÿæˆå’Œå¯¦ç¾
  - æ™ºèƒ½åˆ†æ”¯ç®¡ç†
  - PR æ¨¡æ¿å’Œæè¿°ç”Ÿæˆ

## ğŸ¤– GitHub Actions è‡ªå‹•åŒ–

### CI/CD Pipeline (.github/workflows/ci-cd.yml) ğŸ†•
- **è§¸ç™¼æ¢ä»¶**: Push åˆ° main/develop åˆ†æ”¯ï¼ŒPull Request å‰µå»º
- **åŸ·è¡Œæ­¥é©Ÿ**:
  1. **å¤šç‰ˆæœ¬æ¸¬è©¦**: Python 3.9, 3.10, 3.11
  2. **ğŸ”§ è‡ªå‹•ä»£ç¢¼æ ¼å¼åŒ–**: black + isort è‡ªå‹•ä¿®å¾©ä¸¦æ¨é€ ğŸ†•
  3. **ä»£ç¢¼å“è³ªæª¢æŸ¥**: flake8, black, isort (é©—è­‰æ€§)
  4. **å®‰å…¨æƒæ**: bandit, safety
  5. **æ‡‰ç”¨å¥åº·æª¢æŸ¥**: æ¨¡çµ„å°å…¥æ¸¬è©¦ï¼ŒFlask æ‡‰ç”¨é©—è­‰
  6. **å»ºæ§‹æª¢æŸ¥**: éƒ¨ç½²æ–‡ä»¶é©—è­‰

#### ğŸš€ è‡ªå‹•æ ¼å¼åŒ–åŠŸèƒ½ ğŸ†•
- **è‡ªå‹•ä¿®å¾©**: CI/CD æœƒè‡ªå‹•é‹è¡Œ `black` å’Œ `isort` ä¿®å¾©æ ¼å¼å•é¡Œ
- **è‡ªå‹•æäº¤**: æ ¼å¼ä¿®å¾©æœƒè‡ªå‹•æäº¤ä¸¦æ¨é€åˆ°åŸåˆ†æ”¯
- **é›¶å¹²æ“¾**: é–‹ç™¼è€…ç„¡éœ€æ‰‹å‹•è™•ç†æ ¼å¼åŒ–å•é¡Œ
- **ä¸€è‡´æ€§**: ç¢ºä¿æ•´å€‹å°ˆæ¡ˆçš„ä»£ç¢¼é¢¨æ ¼çµ±ä¸€

### Claude Code AI è‡ªå‹•åŒ– (.github/workflows/claude-code.yml)
- **è§¸ç™¼æ¢ä»¶**:
  - Issue æ¨™è¨˜ç‚º `claude-code`
  - Issue è©•è«–åŒ…å« `@claude-code`
  - æ‰‹å‹•è§¸ç™¼ (workflow_dispatch)
- **AI åŠŸèƒ½**:
  - **è‡ªå‹• PR å‰µå»º**: å¾è‡ªç„¶èªè¨€æè¿°ç”Ÿæˆå®Œæ•´åŠŸèƒ½
  - **Issue è½‰ä»£ç¢¼**: å°‡ GitHub Issue è‡ªå‹•è½‰æ›ç‚ºå·¥ä½œä»£ç¢¼
  - **æ™ºèƒ½å¯¦ç¾**: æ ¹æ“šå°ˆæ¡ˆæ¨¡å¼å’Œ CLAUDE.md æŒ‡å°åŸå‰‡é€²è¡Œé–‹ç™¼
  - **è‡ªå‹•æ¸¬è©¦**: èªæ³•æª¢æŸ¥å’ŒåŸºæœ¬åŠŸèƒ½é©—è­‰

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### ğŸ” æ™ºèƒ½åç‰‡è™•ç† (æ”¯æ´å¤šåç‰‡) ğŸ†•
1. **è‡ªå‹•æª¢æ¸¬**: ç”¨æˆ¶ä¸Šå‚³åœ–ç‰‡å¾Œè‡ªå‹•æª¢æ¸¬åç‰‡æ•¸é‡
2. **å“è³ªè©•ä¼°**: AI è©•ä¼°æ¯å¼µåç‰‡çš„è­˜åˆ¥ä¿¡å¿ƒåº¦å’Œæ¸…æ™°åº¦
3. **æ™ºèƒ½æ±ºç­–**: 
   - **å–®å¼µé«˜å“è³ª** â†’ è‡ªå‹•è™•ç†ä¸¦å­˜å…¥ Notion
   - **å¤šå¼µåç‰‡** â†’ æä¾›ç”¨æˆ¶é¸æ“‡ç•Œé¢
   - **å“è³ªä¸ä½³** â†’ å»ºè­°é‡æ–°æ‹æ”ä¸¦æä¾›æ”¹å–„æç¤º
4. **ç”¨æˆ¶é¸æ“‡**: 
   - åˆ†åˆ¥è™•ç†æ‰€æœ‰åç‰‡
   - åªè™•ç†å“è³ªè‰¯å¥½çš„åç‰‡
   - é‡æ–°æ‹æ”ç‰¹å®šåç‰‡
5. **æ‰¹æ¬¡æ•´åˆ**: èˆ‡ç¾æœ‰æ‰¹æ¬¡æ¨¡å¼å®Œç¾æ•´åˆ

### ğŸ“± LINE Bot äº’å‹•æµç¨‹ ğŸ†•
```
ç”¨æˆ¶ä¸Šå‚³åœ–ç‰‡
    â†“
å¤šåç‰‡ AI åˆ†æ
    â†“
å“è³ªè©•ä¼° â”€â”€ å–®å¼µé«˜å“è³ª â†’ è‡ªå‹•è™•ç† â†’ Notion å­˜å„²
    â†“
å¤šå¼µ/å“è³ªå•é¡Œ
    â†“
ç”¨æˆ¶é¸æ“‡ç•Œé¢ â† â†’ æœƒè©±ç®¡ç† (5åˆ†é˜è¶…æ™‚)
    â†“
æ ¹æ“šé¸æ“‡åŸ·è¡Œ:
â”œâ”€ åˆ†åˆ¥è™•ç† â†’ æ‰¹æ¬¡å­˜å…¥ Notion
â”œâ”€ éƒ¨åˆ†è™•ç† â†’ é¸æ“‡æ€§å­˜å…¥
â””â”€ é‡æ–°æ‹æ” â†’ æ‹æ”å»ºè­°
```

### å–®å¼µåç‰‡è™•ç† (å‚³çµ±æ¨¡å¼)
1. ç”¨æˆ¶ç™¼é€åç‰‡åœ–ç‰‡
2. Gemini AI è­˜åˆ¥å…§å®¹
3. å­˜å…¥ Notion ä¸¦å»ºç«‹ç¨ç«‹é é¢
4. è¿”å›è©³ç´°è™•ç†çµæœ

### æ‰¹æ¬¡è™•ç†æ¨¡å¼
1. ç™¼é€ã€Œæ‰¹æ¬¡ã€é€²å…¥æ‰¹æ¬¡æ¨¡å¼
2. é€£çºŒç™¼é€å¤šå¼µåç‰‡åœ–ç‰‡
3. æ¯å¼µç¨ç«‹è™•ç†ä¸¦å»ºç«‹é é¢
4. ç™¼é€ã€ŒçµæŸæ‰¹æ¬¡ã€æŸ¥çœ‹çµ±è¨ˆ

## ğŸ“± LINE Bot æŒ‡ä»¤

| æŒ‡ä»¤ | åŠŸèƒ½ | ç¯„ä¾‹ |
|------|------|------|
| `æ‰¹æ¬¡` / `batch` | å•Ÿå‹•æ‰¹æ¬¡æ¨¡å¼ | æ‰¹æ¬¡ |
| `çµæŸæ‰¹æ¬¡` / `å®Œæˆæ‰¹æ¬¡` | çµæŸæ‰¹æ¬¡ä¸¦é¡¯ç¤ºçµ±è¨ˆ | çµæŸæ‰¹æ¬¡ |
| `ç‹€æ…‹` / `status` | æŸ¥çœ‹æ‰¹æ¬¡é€²åº¦ | ç‹€æ…‹ |
| `help` / `å¹«åŠ©` | é¡¯ç¤ºä½¿ç”¨èªªæ˜ | help |
| åœ–ç‰‡ä¸Šå‚³ | æ™ºèƒ½åç‰‡è­˜åˆ¥è™•ç† ğŸ†• | [ç™¼é€åœ–ç‰‡] |

### ğŸ†• å¤šåç‰‡è™•ç†ç”¨æˆ¶äº¤äº’

ç•¶æª¢æ¸¬åˆ°å¤šå¼µåç‰‡æˆ–å“è³ªå•é¡Œæ™‚ï¼Œç³»çµ±æœƒæä¾›ä»¥ä¸‹é¸é …ï¼š

| é¸é … | èªªæ˜ | é©ç”¨å ´æ™¯ |
|------|------|----------|
| `1` / `åˆ†åˆ¥è™•ç†æ‰€æœ‰åç‰‡` | è™•ç†æ‰€æœ‰æª¢æ¸¬åˆ°çš„åç‰‡ | å¤šå¼µåç‰‡å“è³ªéƒ½å¯æ¥å— |
| `2` / `åªè™•ç†å“è³ªè‰¯å¥½çš„åç‰‡` | åƒ…è™•ç†ä¿¡å¿ƒåº¦é«˜çš„åç‰‡ | éƒ¨åˆ†åç‰‡æ¨¡ç³Šæˆ–ä¸å®Œæ•´ |
| `3` / `é‡æ–°æ‹æ”` | æ”¾æ£„ç•¶å‰è™•ç†ï¼Œé‡æ–°æ‹æ” | æ•´é«”å“è³ªä¸ç†æƒ³ |
| `ç¹¼çºŒè™•ç†` | æ¥å—ç•¶å‰è­˜åˆ¥çµæœ | å–®å¼µåç‰‡å“è³ªä¸­ç­‰ |
| `é‡æ‹` / `é‡æ–°` | é‡æ–°æ‹æ”çš„åŒç¾©è© | å¿«é€Ÿé‡æ‹é¸æ“‡ |

**ç”¨æˆ¶å¯ä»¥ï¼š**
- å›è¦†æ•¸å­— (1, 2, 3) 
- å›è¦†å®Œæ•´é¸é …æ–‡å­—
- ä½¿ç”¨ç°¡åŒ–æŒ‡ä»¤ (é‡æ‹ã€ç¹¼çºŒã€ç¢ºå®š)

## ğŸ”§ ç’°å¢ƒé…ç½®

### å¿…è¦ç’°å¢ƒè®Šæ•¸
```bash
# LINE Bot é…ç½®
LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token
LINE_CHANNEL_SECRET=your_line_channel_secret

# Google Gemini AI é…ç½®
GOOGLE_API_KEY=your_google_api_key
GOOGLE_API_KEY_FALLBACK=your_fallback_google_api_key  # ğŸ†• å‚™ç”¨ API Key
GEMINI_MODEL=gemini-1.5-flash

# Notion é…ç½®
NOTION_API_KEY=your_notion_api_key
NOTION_DATABASE_ID=your_notion_database_id
```

### GitHub Actions Secrets é…ç½®
```bash
# GitHub Repository Settings > Secrets and variables > Actions

# å¿…è¦ Secrets (ç”¨æ–¼ CI/CD)
GITHUB_TOKEN                    # è‡ªå‹•æä¾›ï¼Œç”¨æ–¼ GitHub API è¨ªå•
LINE_CHANNEL_ACCESS_TOKEN      # LINE Bot API æ¬Šæ–
LINE_CHANNEL_SECRET            # LINE Bot é©—è­‰å¯†é‘°  
GOOGLE_API_KEY                 # Google Gemini AI API é‡‘é‘° (ä¸»è¦)
GOOGLE_API_KEY_FALLBACK        # Google Gemini AI API é‡‘é‘° (å‚™ç”¨) ğŸ†•
NOTION_API_KEY                 # Notion æ•´åˆ API é‡‘é‘°
NOTION_DATABASE_ID             # Notion è³‡æ–™åº« ID

# Claude Code AI è‡ªå‹•åŒ– (å¯é¸)
ANTHROPIC_API_KEY              # Claude AI API é‡‘é‘° (æ¨è–¦)
OPENAI_API_KEY                 # OpenAI API é‡‘é‘° (å‚™ç”¨)

# éƒ¨ç½²ç›¸é—œ (ä¾å¹³å°è€Œå®š)
ZEABUR_TOKEN                   # Zeabur éƒ¨ç½²æ¬Šæ– (æ¨è–¦)
RAILWAY_TOKEN                  # Railway éƒ¨ç½²æ¬Šæ– (å‚™ç”¨)
HEROKU_API_KEY                 # Heroku éƒ¨ç½² API é‡‘é‘° (å‚³çµ±)
```

### GitHub Actions ä½¿ç”¨æŒ‡å—

#### 1. è‡ªå‹• CI/CD æµç¨‹
- **è‡ªå‹•è§¸ç™¼**: æ¨é€ä»£ç¢¼åˆ° main/develop åˆ†æ”¯æ™‚è‡ªå‹•åŸ·è¡Œ
- **æ‰‹å‹•è§¸ç™¼**: åœ¨ GitHub Repository > Actions ä¸­æ‰‹å‹•é‹è¡Œ
- **æ¸¬è©¦å ±å‘Š**: åœ¨ Actions é é¢æŸ¥çœ‹è©³ç´°æ¸¬è©¦çµæœ

#### 2. Claude Code AI è‡ªå‹•åŒ–ä½¿ç”¨
```bash
# æ–¹æ³• 1: é€é Issue æ¨™ç±¤
# 1. å‰µå»º GitHub Issue æè¿°åŠŸèƒ½éœ€æ±‚
# 2. æ·»åŠ æ¨™ç±¤ "claude-code"
# 3. ç³»çµ±è‡ªå‹•åˆ†æä¸¦å‰µå»º PR

# æ–¹æ³• 2: é€é Issue è©•è«–
# 1. åœ¨ Issue ä¸­è©•è«– "@claude-code è«‹å¯¦ç¾é€™å€‹åŠŸèƒ½"
# 2. ç³»çµ±è‡ªå‹•è™•ç†ä¸¦å›æ‡‰

# æ–¹æ³• 3: æ‰‹å‹•è§¸ç™¼
# 1. å‰å¾€ GitHub Repository > Actions
# 2. é¸æ“‡ "Claude Code AI è‡ªå‹•åŒ–" workflow
# 3. é»æ“Š "Run workflow" ä¸¦è¼¸å…¥åŠŸèƒ½æè¿°
```

#### 3. GitHub Actions è‡ªå‹•åŒ–éƒ¨ç½²å·¥ä½œæµ

æœ¬å°ˆæ¡ˆåŒ…å«å¤šå€‹ GitHub Actions å·¥ä½œæµæ–‡ä»¶ï¼Œæä¾›å®Œæ•´çš„ CI/CD è‡ªå‹•åŒ–ï¼š

##### ğŸ“ å·¥ä½œæµæ–‡ä»¶çµæ§‹
```bash
.github/workflows/
â”œâ”€â”€ ci-cd.yml                 # ä¸»è¦ CI/CD æµæ°´ç·š
â”œâ”€â”€ deploy-zeabur.yml         # Zeabur éƒ¨ç½²è‡ªå‹•åŒ–
â”œâ”€â”€ enhanced-testing.yml      # å¢å¼·æ¸¬è©¦å¥—ä»¶
â””â”€â”€ integration-tests.yml     # æ•´åˆæ¸¬è©¦
```

##### ğŸ”„ CI/CD ä¸»æµç¨‹ (ci-cd.yml)
```bash
è§¸ç™¼æ¢ä»¶:
- Push åˆ° main/develop åˆ†æ”¯
- Pull Request å‰µå»º/æ›´æ–°
- æ‰‹å‹•è§¸ç™¼

åŸ·è¡Œæ­¥é©Ÿ:
1. å¤šç‰ˆæœ¬æ¸¬è©¦ (Python 3.9, 3.10, 3.11)
2. ä»£ç¢¼å“è³ªæª¢æŸ¥ (flake8, black, isort)
3. å®‰å…¨æƒæ (bandit, safety)
4. ä¾è³´æ¼æ´æª¢æŸ¥
5. æ‡‰ç”¨å¥åº·æª¢æŸ¥
6. æ¨¡çµ„å°å…¥æ¸¬è©¦
```

##### ğŸš€ Zeabur éƒ¨ç½²æµç¨‹ (deploy-zeabur.yml)
```bash
è‡ªå‹•éƒ¨ç½²:
git push origin main  # è‡ªå‹•è§¸ç™¼ Zeabur éƒ¨ç½²

æ‰‹å‹•éƒ¨ç½²:
1. GitHub Repository > Actions
2. é¸æ“‡ "éƒ¨ç½²åˆ° Zeabur" workflow
3. é»æ“Š "Run workflow"
4. è¨­ç½®åƒæ•¸:
   - environment: production/staging
   - force_deploy: è·³éé æª¢æŸ¥ (true/false)
5. åŸ·è¡Œéƒ¨ç½²

CLI è§¸ç™¼:
gh workflow run "éƒ¨ç½²åˆ° Zeabur" \
  -f environment=production \
  -f force_deploy=false
```

##### ğŸ§ª æ¸¬è©¦è‡ªå‹•åŒ–å·¥ä½œæµ
```bash
å¢å¼·æ¸¬è©¦ (enhanced-testing.yml):
- æ·±åº¦ä»£ç¢¼å“è³ªåˆ†æ
- è¦†è“‹ç‡å ±å‘Šç”Ÿæˆ
- å¤šç’°å¢ƒæ¸¬è©¦çŸ©é™£
- æ•ˆèƒ½åŸºæº–æ¸¬è©¦

æ•´åˆæ¸¬è©¦ (integration-tests.yml):  
- ç«¯åˆ°ç«¯åŠŸèƒ½æ¸¬è©¦
- API æ¥å£æ¸¬è©¦
- æ¨¡æ“¬ Webhook æ¸¬è©¦
- è³‡æ–™åº«æ•´åˆæ¸¬è©¦
```

##### âš™ï¸ å·¥ä½œæµè¨­ç½®å’Œé…ç½®

###### GitHub Secrets å®Œæ•´æ¸…å–®
```bash
# å¿…è¦ API Keys
LINE_CHANNEL_ACCESS_TOKEN      # LINE Bot API æ¬Šæ–
LINE_CHANNEL_SECRET            # LINE Bot é©—è­‰å¯†é‘°
GOOGLE_API_KEY                 # Google Gemini AI ä¸»è¦ API
GOOGLE_API_KEY_FALLBACK        # Google Gemini å‚™ç”¨ API
NOTION_API_KEY                 # Notion æ•´åˆ API é‡‘é‘°
NOTION_DATABASE_ID             # Notion è³‡æ–™åº« ID

# éƒ¨ç½²ç›¸é—œ
ZEABUR_TOKEN                   # Zeabur éƒ¨ç½²æ¬Šæ– (æ¨è–¦)
RAILWAY_TOKEN                  # Railway éƒ¨ç½²æ¬Šæ– (å‚™ç”¨)
HEROKU_API_KEY                 # Heroku éƒ¨ç½² API (å‚³çµ±)

# å¯é¸ AI åŠŸèƒ½
ANTHROPIC_API_KEY              # Claude AI API (Claude Code)
OPENAI_API_KEY                 # OpenAI API é‡‘é‘° (å‚™ç”¨)
```

###### ç’°å¢ƒè®Šæ•¸é…ç½®
```bash
# åœ¨ GitHub Actions ä¸­è‡ªå‹•è¨­ç½®çš„ç’°å¢ƒè®Šæ•¸
PYTHON_VERSION=3.9             # Python ç‰ˆæœ¬
FLASK_ENV=production           # Flask ç’°å¢ƒ
PORT=5002                      # æ‡‰ç”¨ç«¯å£
GITHUB_TOKEN                   # è‡ªå‹•æä¾›çš„ GitHub API æ¬Šæ–
```

##### ğŸ“Š å·¥ä½œæµç›£æ§å’Œç®¡ç†

###### 1. GitHub Actions ä»‹é¢ç›£æ§
```bash
# å³æ™‚ç›£æ§
https://github.com/your-repo/actions

# å·¥ä½œæµç‹€æ…‹
âœ… æˆåŠŸ - æ‰€æœ‰æ­¥é©Ÿå®Œæˆ
âŒ å¤±æ•— - æŸå€‹æ­¥é©Ÿå¤±æ•—
ğŸŸ¡ é€²è¡Œä¸­ - æ­£åœ¨åŸ·è¡Œ
â¸ï¸ å·²å–æ¶ˆ - æ‰‹å‹•æˆ–è‡ªå‹•å–æ¶ˆ
```

###### 2. ä½¿ç”¨ GitHub CLI ç®¡ç†
```bash
# å®‰è£ GitHub CLI
brew install gh                # macOS
winget install GitHub.cli      # Windows
apt install gh                 # Linux

# ç™»å…¥å’Œè¨­ç½®
gh auth login

# æŸ¥çœ‹å·¥ä½œæµç‹€æ…‹
gh run list                    # åˆ—å‡ºæœ€è¿‘çš„é‹è¡Œ
gh run list --workflow="CI/CD" # ç‰¹å®šå·¥ä½œæµ
gh run view [run-id]           # æŸ¥çœ‹è©³ç´°ä¿¡æ¯
gh run view [run-id] --log     # æŸ¥çœ‹æ—¥èªŒ

# æ‰‹å‹•è§¸ç™¼å·¥ä½œæµ
gh workflow run "éƒ¨ç½²åˆ° Zeabur"
gh workflow run "CI/CD" --ref main

# å–æ¶ˆé‹è¡Œä¸­çš„å·¥ä½œæµ
gh run cancel [run-id]

# é‡æ–°é‹è¡Œå¤±æ•—çš„å·¥ä½œæµ
gh run rerun [run-id]
```

###### 3. å·¥ä½œæµç‹€æ…‹å¾½ç« 
```markdown
# åœ¨ README ä¸­æ·»åŠ ç‹€æ…‹å¾½ç« 
[![CI/CD](https://github.com/your-repo/namecard/actions/workflows/ci-cd.yml/badge.svg)](https://github.com/your-repo/namecard/actions/workflows/ci-cd.yml)

[![Deploy to Zeabur](https://github.com/your-repo/namecard/actions/workflows/deploy-zeabur.yml/badge.svg)](https://github.com/your-repo/namecard/actions/workflows/deploy-zeabur.yml)
```

##### ğŸ”§ è‡ªå®šç¾©å·¥ä½œæµé…ç½®

###### è§¸ç™¼æ¢ä»¶è‡ªå®šç¾©
```yaml
# åƒ…åœ¨ç‰¹å®šæ–‡ä»¶è®Šæ›´æ™‚è§¸ç™¼
on:
  push:
    branches: [ main ]
    paths:
      - 'app.py'
      - '*.py'
      - 'requirements.txt'
    paths-ignore:
      - 'docs/**'
      - '**.md'

# å®šæ™‚è§¸ç™¼ (æ¯æ—¥å¥åº·æª¢æŸ¥)
on:
  schedule:
    - cron: '0 2 * * *'  # æ¯æ—¥å‡Œæ™¨ 2 é»åŸ·è¡Œ
```

###### ç’°å¢ƒåˆ†æ”¯ç­–ç•¥
```yaml
# å¤šç’°å¢ƒéƒ¨ç½²
environments:
  production:
    if: github.ref == 'refs/heads/main'
  staging: 
    if: github.ref == 'refs/heads/develop'
  development:
    if: github.ref == 'refs/heads/feature/*'
```

##### ğŸš¨ å¸¸è¦‹å·¥ä½œæµå•é¡Œæ’æŸ¥

###### 1. å·¥ä½œæµåŸ·è¡Œå¤±æ•—
```bash
# æª¢æŸ¥æ­¥é©Ÿ
1. æŸ¥çœ‹å¤±æ•—çš„å·¥ä½œæµæ—¥èªŒ
2. æª¢æŸ¥ GitHub Secrets è¨­ç½®
3. ç¢ºèª requirements.txt ä¾è³´
4. é©—è­‰ä»£ç¢¼èªæ³•æ­£ç¢ºæ€§
5. æª¢æŸ¥ç¶²è·¯é€£æ¥å•é¡Œ

# è§£æ±ºæ–¹æ³•
gh run view [failed-run-id] --log  # æŸ¥çœ‹è©³ç´°éŒ¯èª¤
gh workflow run [workflow] --ref main  # é‡æ–°è§¸ç™¼
```

###### 2. Secrets é…ç½®å•é¡Œ
```bash
# æª¢æŸ¥ Secrets è¨­ç½®
Repository > Settings > Secrets and variables > Actions

# å¸¸è¦‹å•é¡Œ
- API Key æ ¼å¼éŒ¯èª¤
- Secret åç¨±æ‹¼å¯«éŒ¯èª¤  
- API Key éæœŸæˆ–ç„¡æ•ˆ
- æ¬Šé™ä¸è¶³

# é©—è­‰æ–¹æ³•
echo "ZEABUR_TOKEN é•·åº¦: ${#ZEABUR_TOKEN}"
echo "API Key å‰6ä½: ${GOOGLE_API_KEY:0:6}"
```

###### 3. éƒ¨ç½²æ¬Šé™å•é¡Œ
```bash
# Zeabur Token æ¬Šé™
- ç¢ºä¿ Token æœ‰å°ˆæ¡ˆå­˜å–æ¬Šé™
- æª¢æŸ¥ Token æ˜¯å¦éæœŸ
- é©—è­‰å°ˆæ¡ˆåç¨±æ­£ç¢º

# GitHub Actions æ¬Šé™
- Repository > Settings > Actions > General
- ç¢ºä¿ "Read and write permissions" å·²å•Ÿç”¨
- æª¢æŸ¥ "Allow GitHub Actions to create and approve pull requests"
```

##### ğŸ“ˆ å·¥ä½œæµæ•ˆèƒ½å„ªåŒ–

###### 1. å¿«å–è¨­ç½®
```yaml
# Python ä¾è³´å¿«å–
- uses: actions/cache@v3
  with:
    path: ~/.cache/pip
    key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}

# Node.js å¿«å– (å¦‚é©ç”¨)
- uses: actions/cache@v3  
  with:
    path: ~/.npm
    key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
```

###### 2. ä¸¦è¡ŒåŸ·è¡Œ
```yaml
# å¤šä»»å‹™ä¸¦è¡ŒåŸ·è¡Œ
strategy:
  matrix:
    python-version: [3.9, 3.10, 3.11]
    os: [ubuntu-latest, windows-latest, macos-latest]
  fail-fast: false  # ä¸€å€‹å¤±æ•—ä¸å½±éŸ¿å…¶ä»–
```

###### 3. æ¢ä»¶åŸ·è¡Œ
```yaml
# åƒ…åœ¨è®Šæ›´æ™‚åŸ·è¡Œæ¸¬è©¦
if: contains(github.event.head_commit.message, '[test]') || 
    github.event_name == 'pull_request'
```

### Notion è³‡æ–™åº«æ¬„ä½è¨­å®š
- **Name** (title) - å§“å
- **å…¬å¸åç¨±** (rich_text) - å…¬å¸
- **éƒ¨é–€** (rich_text) - éƒ¨é–€
- **è·ç¨±** (select) - è·ä½
- **æ±ºç­–å½±éŸ¿åŠ›** (select) - é«˜/ä¸­/ä½
- **Email** (email) - é›»å­éƒµä»¶
- **é›»è©±** (phone_number) - é›»è©±è™Ÿç¢¼
- **åœ°å€** (rich_text) - å…¬å¸åœ°å€æˆ–è¯çµ¡åœ°å€
- **å–å¾—è¯ç¹«ä¾†æº** (rich_text) - ä¾†æº
- **è¯ç¹«æ³¨æ„äº‹é …** (rich_text) - å‚™è¨»
- **çª—å£çš„å›°æ“¾æˆ– KPI** (rich_text) - å¾…è£œå……

## ğŸš€ éƒ¨ç½²è³‡è¨Š

### æœ¬åœ°é–‹ç™¼
```bash
# å•Ÿå‹•æ‡‰ç”¨
python app.py

# å•Ÿå‹• ngrok éš§é“ (é–‹ç™¼ç”¨)
ngrok http 5002
```

### ğŸŒ Zeabur é›²ç«¯éƒ¨ç½² (æ¨è–¦)

Zeabur æ˜¯ä¸€å€‹ç¾ä»£åŒ–çš„é›²ç«¯éƒ¨ç½²å¹³å°ï¼Œæä¾›ç°¡å–®æ˜“ç”¨çš„æ‡‰ç”¨éƒ¨ç½²æœå‹™ã€‚æˆ‘å€‘æ•´åˆäº†å®Œæ•´çš„ GitHub Actions è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹ã€‚

#### ğŸš€ è‡ªå‹•éƒ¨ç½²æµç¨‹ (GitHub Actions)

**æ–‡ä»¶ä½ç½®**: `.github/workflows/deploy-zeabur.yml`

**è§¸ç™¼æ¢ä»¶**:
- **è‡ªå‹•è§¸ç™¼**: æ¨é€ä»£ç¢¼åˆ° `main` åˆ†æ”¯æ™‚è‡ªå‹•éƒ¨ç½²
- **æ‰‹å‹•è§¸ç™¼**: GitHub Actions > "éƒ¨ç½²åˆ° Zeabur" > Run workflow
- **æ™ºèƒ½éæ¿¾**: åªæœ‰å¯¦éš›ä»£ç¢¼è®Šæ›´æ‰è§¸ç™¼éƒ¨ç½²ï¼ˆå¿½ç•¥æ–‡æª”è®Šæ›´ï¼‰

**éƒ¨ç½²æµç¨‹**:
```
1. é éƒ¨ç½²æª¢æŸ¥ (å¯é¸è·³é)
   â”œâ”€â”€ èªæ³•æª¢æŸ¥ (Python ç·¨è­¯)
   â”œâ”€â”€ æ ¸å¿ƒæ¨¡çµ„é©—è­‰
   â””â”€â”€ å¿…è¦æ–‡ä»¶æª¢æŸ¥

2. Zeabur éƒ¨ç½²
   â”œâ”€â”€ å®‰è£ Zeabur CLI
   â”œâ”€â”€ é…ç½®èªè­‰
   â”œâ”€â”€ å‰µå»ºéƒ¨ç½²é…ç½®
   â”œâ”€â”€ å°ˆæ¡ˆ/æœå‹™ç®¡ç†
   â””â”€â”€ ç’°å¢ƒè®Šæ•¸è¨­ç½®

3. å¥åº·æª¢æŸ¥
   â”œâ”€â”€ ç­‰å¾…æœå‹™å•Ÿå‹•
   â”œâ”€â”€ ç«¯é»é€£é€šæ€§æ¸¬è©¦
   â””â”€â”€ éƒ¨ç½²ç‹€æ…‹é©—è­‰

4. éƒ¨ç½²å¾Œæ¸¬è©¦
   â”œâ”€â”€ å¥åº·æª¢æŸ¥ç«¯é»æ¸¬è©¦
   â”œâ”€â”€ Webhook ç«¯é»æ¸¬è©¦
   â””â”€â”€ çµæœé€šçŸ¥
```

#### ğŸ”§ Zeabur é…ç½®è¨­ç½®

##### 1. ç²å– Zeabur Token
```bash
# æ­¥é©Ÿ
1. å‰å¾€ https://dash.zeabur.com/account/developer
2. ç”Ÿæˆæ–°çš„ API Token
3. è¤‡è£½ Token å€¼
4. åœ¨ GitHub Repository Settings > Secrets and variables > Actions
5. æ–°å¢ Secret: ZEABUR_TOKEN = your_token_here
```

##### 2. GitHub Secrets é…ç½®
```bash
# å¿…è¦ Secrets (ç”¨æ–¼ Zeabur éƒ¨ç½²)
ZEABUR_TOKEN                   # Zeabur éƒ¨ç½²æ¬Šæ– (å¿…é ˆ)
LINE_CHANNEL_ACCESS_TOKEN      # LINE Bot API æ¬Šæ–
LINE_CHANNEL_SECRET            # LINE Bot é©—è­‰å¯†é‘°  
GOOGLE_API_KEY                 # Google Gemini AI API é‡‘é‘° (ä¸»è¦)
GOOGLE_API_KEY_FALLBACK        # Google Gemini AI API é‡‘é‘° (å‚™ç”¨)
NOTION_API_KEY                 # Notion æ•´åˆ API é‡‘é‘°
NOTION_DATABASE_ID             # Notion è³‡æ–™åº« ID
```

##### 3. éƒ¨ç½²é…ç½®è©³æƒ…
```json
{
  "name": "namecard-line-bot",
  "type": "python",
  "buildCommand": "pip install -r requirements.txt",
  "startCommand": "python app.py",
  "environment": {
    "PYTHON_VERSION": "3.9",
    "PORT": "5002"
  },
  "regions": ["hkg"],
  "scaling": {
    "minInstances": 1,
    "maxInstances": 2
  }
}
```

#### ğŸ“± æ‰‹å‹•éƒ¨ç½²æ“ä½œ

##### æ–¹æ³• 1: è‡ªå‹•éƒ¨ç½² (æ¨è–¦)
```bash
# ç°¡å–®æ¨é€å³å¯è§¸ç™¼éƒ¨ç½²
git add .
git commit -m "feat: æ–°åŠŸèƒ½æ›´æ–°"
git push origin main
# â†’ è‡ªå‹•è§¸ç™¼éƒ¨ç½²æµç¨‹
```

##### æ–¹æ³• 2: æ‰‹å‹•è§¸ç™¼éƒ¨ç½²
```bash
# åœ¨ GitHub ä»‹é¢æ“ä½œ
1. å‰å¾€ GitHub Repository > Actions
2. é¸æ“‡ "éƒ¨ç½²åˆ° Zeabur" workflow
3. é»æ“Š "Run workflow"
4. é¸æ“‡éƒ¨ç½²åƒæ•¸:
   - environment: production/staging
   - force_deploy: æ˜¯å¦è·³éé æª¢æŸ¥
5. é»æ“Š "Run workflow" åŸ·è¡Œ
```

##### æ–¹æ³• 3: ä½¿ç”¨ GitHub CLI
```bash
# å®‰è£ GitHub CLI
brew install gh  # macOS
# æˆ–è¨ªå• https://cli.github.com/

# ç™»å…¥ GitHub
gh auth login

# è§¸ç™¼éƒ¨ç½²
gh workflow run "éƒ¨ç½²åˆ° Zeabur" \
  -f environment=production \
  -f force_deploy=false

# æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹
gh run list --workflow="éƒ¨ç½²åˆ° Zeabur"
gh run view [run-id] --log
```

#### ğŸ” éƒ¨ç½²ç‹€æ…‹ç›£æ§

##### 1. GitHub Actions ç›£æ§
```bash
# å¯¦æ™‚æŸ¥çœ‹éƒ¨ç½²é€²åº¦
https://github.com/your-repo/actions

# éƒ¨ç½²æ—¥èªŒæŸ¥çœ‹
- é»æ“Šæœ€æ–°çš„ "éƒ¨ç½²åˆ° Zeabur" workflow run
- æŸ¥çœ‹å„å€‹æ­¥é©Ÿçš„è©³ç´°æ—¥èªŒ
- ç›£æ§éƒ¨ç½²é€²åº¦å’ŒéŒ¯èª¤ä¿¡æ¯
```

##### 2. Zeabur Dashboard ç›£æ§
```bash
# Zeabur æ§åˆ¶å°
https://dash.zeabur.com/

# å°ˆæ¡ˆä¿¡æ¯
- å°ˆæ¡ˆåç¨±: namecard-line-bot
- æœå‹™åç¨±: namecard-app
- éƒ¨ç½²å€åŸŸ: é¦™æ¸¯ (hkg)
- å¯¦ä¾‹é…ç½®: 1-2 å€‹å¯¦ä¾‹è‡ªå‹•æ“´å±•
```

##### 3. æ‡‰ç”¨å¥åº·ç›£æ§
```bash
# è‡ªå‹•å¥åº·æª¢æŸ¥ç«¯é»
https://your-app.zeabur.app/health

# æ¸¬è©¦ç«¯é»
https://your-app.zeabur.app/test

# LINE Webhook ç«¯é»
https://your-app.zeabur.app/callback
```

#### ğŸ”§ éƒ¨ç½²å¾Œé…ç½®

##### 1. æ›´æ–° LINE Webhook URL
```bash
# æ­¥é©Ÿè©³æƒ…
1. ç²å–éƒ¨ç½² URL (å¾ GitHub Actions æ—¥èªŒä¸­)
   æ ¼å¼: https://namecard-line-bot-xxx.zeabur.app

2. å‰å¾€ LINE Developers Console
   https://developers.line.biz/console/

3. é¸æ“‡æ‚¨çš„ LINE Bot Channel

4. å‰å¾€ "Messaging API" æ¨™ç±¤é 

5. æ›´æ–° Webhook URL:
   æ–° URL: https://your-app.zeabur.app/callback

6. å•Ÿç”¨ "Use webhook" é¸é …

7. é»æ“Š "Verify" æ¸¬è©¦é€£æ¥

8. ç¢ºèªç‹€æ…‹é¡¯ç¤ºç‚º "Success"
```

##### 2. é©—è­‰éƒ¨ç½²æˆåŠŸ
```bash
# å¥åº·æª¢æŸ¥
curl https://your-app.zeabur.app/health
# æ‡‰è©²è¿”å›: {"status": "healthy", "timestamp": "..."}

# æœå‹™æ¸¬è©¦
curl https://your-app.zeabur.app/test
# æ‡‰è©²è¿”å›: {"message": "åç‰‡ç®¡ç† LINE Bot é‹è¡Œä¸­", ...}

# Webhook ç«¯é»æ¸¬è©¦
curl -X POST https://your-app.zeabur.app/callback
# æ‡‰è©²è¿”å› 400 (æ­£å¸¸ï¼Œå› ç‚ºæ²’æœ‰æä¾›æ­£ç¢ºçš„ LINE ç°½å)
```

##### 3. LINE Bot åŠŸèƒ½æ¸¬è©¦
```bash
# æ¸¬è©¦æµç¨‹
1. åœ¨ LINE ä¸­æœå°‹ä¸¦æ·»åŠ æ‚¨çš„ Bot
2. ç™¼é€ "help" æ¸¬è©¦åŸºæœ¬éŸ¿æ‡‰
3. ç™¼é€åç‰‡åœ–ç‰‡æ¸¬è©¦ AI è­˜åˆ¥åŠŸèƒ½
4. æª¢æŸ¥ Notion è³‡æ–™åº«æ˜¯å¦æ­£ç¢ºå­˜å„²
5. æ¸¬è©¦æ‰¹æ¬¡è™•ç†æ¨¡å¼
```

#### âš ï¸ å¸¸è¦‹å•é¡Œæ’æŸ¥

##### 1. éƒ¨ç½²å¤±æ•—
```bash
# æª¢æŸ¥äº‹é …
âœ… ZEABUR_TOKEN æ˜¯å¦æ­£ç¢ºè¨­ç½®
âœ… GitHub Secrets ä¸­çš„ API Keys æ˜¯å¦é½Šå…¨
âœ… requirements.txt æ˜¯å¦åŒ…å«æ‰€æœ‰ä¾è³´
âœ… app.py èªæ³•æ˜¯å¦æ­£ç¢º
âœ… ç¶²è·¯é€£æ¥æ˜¯å¦æ­£å¸¸

# è§£æ±ºæ–¹æ³•
1. æª¢æŸ¥ GitHub Actions éŒ¯èª¤æ—¥èªŒ
2. ç¢ºèª Zeabur Token æœ‰æ•ˆæ€§
3. æ‰‹å‹•è§¸ç™¼éƒ¨ç½²ä¸¦å•Ÿç”¨ force_deploy
4. è¯ç¹« Zeabur æŠ€è¡“æ”¯æ´
```

##### 2. å¥åº·æª¢æŸ¥å¤±æ•—
```bash
# å¯èƒ½åŸå› 
- æ‡‰ç”¨å•Ÿå‹•æ™‚é–“éé•·
- ç’°å¢ƒè®Šæ•¸é…ç½®éŒ¯èª¤
- ä¾è³´å®‰è£å¤±æ•—
- ç«¯å£é…ç½®å•é¡Œ

# è§£æ±ºæ–¹æ³•
1. æŸ¥çœ‹ Zeabur Dashboard çš„æ‡‰ç”¨æ—¥èªŒ
2. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢ºè¨­ç½®
3. ç¢ºèª Flask æ‡‰ç”¨ç›£è½æ­£ç¢ºç«¯å£ (5002)
4. ç­‰å¾…æ›´é•·æ™‚é–“è®“æ‡‰ç”¨å®Œå…¨å•Ÿå‹•
```

##### 3. LINE Webhook é€£æ¥å¤±æ•—
```bash
# æª¢æŸ¥äº‹é …
âœ… Webhook URL æ ¼å¼æ­£ç¢º
âœ… SSL è­‰æ›¸æœ‰æ•ˆ (Zeabur è‡ªå‹•æä¾›)
âœ… æ‡‰ç”¨æ­£å¸¸é‹è¡Œ
âœ… LINE_CHANNEL_SECRET è¨­ç½®æ­£ç¢º

# æ¸¬è©¦æ–¹æ³•
curl -X POST https://your-app.zeabur.app/callback \
  -H "Content-Type: application/json" \
  -d '{"events":[]}'
```

#### ğŸ“Š éƒ¨ç½²æ•ˆèƒ½æŒ‡æ¨™

- **éƒ¨ç½²æ™‚é–“**: é€šå¸¸ 3-5 åˆ†é˜
- **å•Ÿå‹•æ™‚é–“**: 30-60 ç§’
- **å¯ç”¨æ€§**: 99.9% SLA
- **è‡ªå‹•æ“´å±•**: 1-2 å¯¦ä¾‹æ ¹æ“šè² è¼‰
- **å€åŸŸ**: é¦™æ¸¯ (hkg) ä½å»¶é²
- **SSL**: è‡ªå‹• HTTPS è­‰æ›¸
- **ç›£æ§**: å…§å»ºæ‡‰ç”¨ç›£æ§å’Œæ—¥èªŒ

#### ğŸ”„ ç‰ˆæœ¬ç®¡ç†å’Œå›æ»¾

```bash
# ç‰ˆæœ¬æ¨™ç±¤ (å¯é¸)
git tag -a v1.0.0 -m "æ­£å¼ç‰ˆæœ¬ v1.0.0"
git push origin v1.0.0

# å›æ»¾åˆ°å‰ä¸€ç‰ˆæœ¬ (åœ¨ Zeabur Dashboard)
1. å‰å¾€ Zeabur Dashboard
2. é¸æ“‡å°ˆæ¡ˆå’Œæœå‹™
3. åœ¨ "Deployments" æ¨™ç±¤æŸ¥çœ‹éƒ¨ç½²æ­·å²
4. é¸æ“‡ä¹‹å‰çš„éƒ¨ç½²ç‰ˆæœ¬
5. é»æ“Š "Rollback" å›æ»¾

# ç·Šæ€¥å›æ»¾ (é€é Git)
git revert HEAD
git push origin main  # è§¸ç™¼æ–°çš„éƒ¨ç½²
```

### ğŸ”§ å…¶ä»–éƒ¨ç½²é¸é …

#### Railway (å‚™ç”¨é¸é …)
```bash
# å¦‚æœæœ‰ Railway token
RAILWAY_TOKEN=your_railway_token_here
```

#### Heroku (å‚³çµ±é¸é …)
```bash
# å¦‚æœä½¿ç”¨ Heroku
HEROKU_API_KEY=your_heroku_api_key_here
```

### Webhook URL æ ¼å¼
- **Zeabur**: `https://your-app.zeabur.app/callback`
- **ngrok** (é–‹ç™¼): `https://your-ngrok-url.ngrok-free.app/callback`
- **æ–¹æ³•**: POST
- **Content-Type**: application/json

## ğŸ§ª æ¸¬è©¦å·¥å…·

### æœ¬åœ°æ¸¬è©¦å·¥å…·

#### Webhook æ¸¬è©¦ (test_new_webhook.py)
```bash
python test_new_webhook.py
```
- å¥åº·æª¢æŸ¥æ¸¬è©¦
- GET /callback æ¸¬è©¦  
- POST /callback æ¨¡æ“¬æ¸¬è©¦

#### åœ°å€æ­£è¦åŒ–æ¸¬è©¦ (test_address_normalizer.py) ğŸ†•
```bash
python3 test_address_normalizer.py
```
- å°ç£åœ°å€æ¨™æº–åŒ–æ¸¬è©¦
- ç¸£å¸‚å€åŸŸåç¨±æ­£è¦åŒ–æ¸¬è©¦
- æ¨“å±¤æ ¼å¼çµ±ä¸€æ¸¬è©¦
- é“è·¯æ®µæ•¸ä¸­æ–‡åŒ–æ¸¬è©¦
- åœ°å€çµ„ä»¶è§£ææ¸¬è©¦
- ä¿¡å¿ƒåº¦è¨ˆç®—é©—è­‰
- ç„¡æ•ˆåœ°å€è™•ç†æ¸¬è©¦
- éå°ç£åœ°å€è­˜åˆ¥æ¸¬è©¦

#### å¤šåç‰‡è™•ç†ç³»çµ±æ¸¬è©¦ (test_multi_card_processor.py) ğŸ†•
```bash
python3 test_multi_card_processor.py
```
- **å–®å…ƒæ¸¬è©¦**:
  - NameCardProcessor å¤šåç‰‡æª¢æ¸¬åŠŸèƒ½
  - MultiCardProcessor å“è³ªè©•ä¼°é‚è¼¯
  - UserInteractionHandler æœƒè©±ç®¡ç†
  - ç”¨æˆ¶é¸æ“‡è§£æå’Œè™•ç†
- **æ•´åˆæ¸¬è©¦**:
  - å®Œæ•´å¤šåç‰‡å·¥ä½œæµç¨‹
  - ç”¨æˆ¶äº¤äº’æœƒè©±ç”Ÿå‘½é€±æœŸ
  - å“è³ªè©•ä¼°æ±ºç­–é‚è¼¯
- **æ¸¬è©¦è¦†è“‹ç‡**: 100% (17/17 æ¸¬è©¦é€šé)

#### API å‚™ç”¨æ©Ÿåˆ¶æ¸¬è©¦ (test_api_fallback.py) ğŸ†•
```bash
python3 test_api_fallback.py
```
- **åŠŸèƒ½æ¸¬è©¦**:
  - API Key é…ç½®æª¢æŸ¥
  - åç‰‡è™•ç†å™¨åˆå§‹åŒ–
  - é¡åº¦è¶…é™éŒ¯èª¤æª¢æ¸¬é‚è¼¯
  - API Key è‡ªå‹•åˆ‡æ›æ©Ÿåˆ¶
  - å‚™ç”¨æ©Ÿåˆ¶ç«¯åˆ°ç«¯æ¸¬è©¦
- **æ¸¬è©¦çµæœ**: ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼API å‚™ç”¨æ©Ÿåˆ¶æ­£å¸¸å·¥ä½œ

#### LINE Bot API éŒ¯èª¤è™•ç†æ¸¬è©¦ (test_simple_error_handling.py) ğŸ†•
```bash
python3 test_simple_error_handling.py
```
- **éŒ¯èª¤è™•ç†é‚è¼¯æ¸¬è©¦**:
  - API é…é¡è¶…é™ (429) è™•ç†å’Œç‹€æ…‹è¿½è¹¤
  - é€Ÿç‡é™åˆ¶ (429) è‡ªå‹•é‡è©¦æ©Ÿåˆ¶  
  - å®¢æˆ¶ç«¯éŒ¯èª¤ (400/401/403) è™•ç†
  - ä¼ºæœå™¨éŒ¯èª¤ (500+) é‡è©¦æ©Ÿåˆ¶
- **é™ç´šæœå‹™æ¸¬è©¦**:
  - é…é¡è¶…é™é™ç´šè¨Šæ¯ç”Ÿæˆ
  - é€Ÿç‡é™åˆ¶å»ºè­°å’Œç­‰å¾…æç¤º
  - ç¶²è·¯éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶æŒ‡å°
- **ç‹€æ…‹ç›£æ§æ¸¬è©¦**:
  - é…é¡ç‹€æ…‹è‡ªå‹•è¿½è¹¤å’Œé‡ç½®
  - éŒ¯èª¤çµ±è¨ˆå’Œé »ç‡åˆ†æ
  - API å¥åº·ç‹€æ…‹å ±å‘Šç”Ÿæˆ
- **æ¸¬è©¦çµæœ**: ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼API éŒ¯èª¤è™•ç†æ©Ÿåˆ¶æ­£å¸¸å·¥ä½œ

### GitHub Actions æ¸¬è©¦

#### CI/CD Pipeline æ¸¬è©¦
```bash
# æœ¬åœ°æ¨¡æ“¬ CI/CD æª¢æŸ¥
pip install flake8 black isort bandit safety

# ä»£ç¢¼å“è³ªæª¢æŸ¥
flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
black --check --diff .
isort --check-only --diff .

# å®‰å…¨æƒæ
bandit -r . -f txt
safety check

# æ¨¡çµ„å°å…¥æ¸¬è©¦
python -c "from app import app; print('âœ… Flask æ‡‰ç”¨æ­£å¸¸')"
```

#### æ‰‹å‹•è§¸ç™¼ GitHub Actions
```bash
# ä½¿ç”¨ GitHub CLI (éœ€å…ˆå®‰è£ gh)
gh workflow run "åç‰‡ç®¡ç† LINE Bot CI/CD"
gh workflow run "Claude Code AI è‡ªå‹•åŒ–" -f feature_description="æ·»åŠ æ–°åŠŸèƒ½"

# æŸ¥çœ‹ workflow ç‹€æ…‹
gh run list
gh run view [run-id]
```

### å¸¸ç”¨é–‹ç™¼æŒ‡ä»¤
```bash
# æ¸¬è©¦æµç¨‹
python3 test_new_webhook.py          # Webhook æ¸¬è©¦
python3 test_address_normalizer.py   # åœ°å€æ­£è¦åŒ–æ¸¬è©¦
python3 test_multi_card_processor.py # å¤šåç‰‡ç³»çµ±æ¸¬è©¦ ğŸ†•
python3 test_api_fallback.py         # API å‚™ç”¨æ©Ÿåˆ¶æ¸¬è©¦ ğŸ†•
python3 test_simple_error_handling.py # LINE Bot API éŒ¯èª¤è™•ç†æ¸¬è©¦ ğŸ†•

# ä»£ç¢¼æ ¼å¼åŒ– ğŸ†•
./format_code.sh                    # ä¸€éµæ ¼å¼åŒ–è…³æœ¬ (æ¨è–¦)
black .                             # è‡ªå‹•æ ¼å¼åŒ–
isort .                             # è‡ªå‹•æ’åº imports

# Pre-commit hooks (æ¨è–¦)
pip install pre-commit              # å®‰è£ pre-commit
pre-commit install                  # å®‰è£ Git hooks
pre-commit run --all-files          # æ‰‹å‹•é‹è¡Œæ‰€æœ‰æª¢æŸ¥

# æœ¬åœ°é–‹ç™¼
python app.py                       # å•Ÿå‹•æ‡‰ç”¨
ngrok http 5002                     # å»ºç«‹éš§é“ (é–‹ç™¼ç”¨)

# Git æµç¨‹
git add .
git commit -m "feat: æ–°åŠŸèƒ½"
git push origin main                # è§¸ç™¼ CI/CD (æœƒè‡ªå‹•æ ¼å¼åŒ–)

# éƒ¨ç½²
./deploy.sh                         # åŸ·è¡Œéƒ¨ç½²è…³æœ¬ (å¦‚æœæœ‰)
```

## ğŸ› å·²çŸ¥å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### 1. Notion æ¬„ä½é¡å‹éŒ¯èª¤
**å•é¡Œ**: Email/é›»è©±æ¬„ä½é¡å‹ä¸åŒ¹é…
**è§£æ±º**: ä½¿ç”¨æ­£ç¢ºçš„ `email` å’Œ `phone_number` é¡å‹ï¼Œä¸¦åŠ å…¥æ ¼å¼é©—è­‰

### 2. æ‰¹æ¬¡æ¨¡å¼è¨˜æ†¶é«”ç®¡ç†
**å•é¡Œ**: é•·æ™‚é–“é‹è¡Œå¯èƒ½ç´¯ç©éå¤šæœƒè©±
**è§£æ±º**: å¯¦ä½œè‡ªå‹•éæœŸæ¸…ç†æ©Ÿåˆ¶

### 3. ngrok é€£æ¥ä¸ç©©å®š
**å•é¡Œ**: ngrok URL æœƒè®Šå‹•
**è§£æ±º**: æ¯æ¬¡é‡å•Ÿéƒ½éœ€è¦æ›´æ–° LINE Developers Console çš„ Webhook URL

### 4. LINE Bot API é…é¡é™åˆ¶ ğŸ†•
**å•é¡Œ**: LINE Bot API é”åˆ°æœˆåº¦ä½¿ç”¨é…é¡ (status_code=429)
**è§£æ±º**: 
- **è‡ªå‹•æª¢æ¸¬**: ç³»çµ±è‡ªå‹•æª¢æ¸¬é…é¡ç‹€æ…‹ä¸¦è¨­ç½®é‡ç½®æ™‚é–“
- **é™ç´šæœå‹™**: æä¾›å‹å¥½çš„ç”¨æˆ¶æç¤ºï¼Œèªªæ˜æœå‹™æš«æ™‚å—é™
- **ç‹€æ…‹ç›£æ§**: é€é `/api-status` ç«¯é»ç›£æ§ API ç‹€æ…‹
- **æ™ºèƒ½é‡è©¦**: é‡å°ä¸åŒéŒ¯èª¤é¡å‹æ¡ç”¨ä¸åŒé‡è©¦ç­–ç•¥
- **éŒ¯èª¤çµ±è¨ˆ**: è¿½è¹¤å„ç¨® API éŒ¯èª¤ç™¼ç”Ÿé »ç‡ï¼Œä¾¿æ–¼å•é¡Œè¨ºæ–·

## ğŸ“Š æ•ˆèƒ½æŒ‡æ¨™

- **å–®å¼µåç‰‡è™•ç†æ™‚é–“**: ~5-10 ç§’
- **Gemini AI è­˜åˆ¥æº–ç¢ºç‡**: ~90%
- **ä¸¦ç™¼è™•ç†èƒ½åŠ›**: æ”¯æ´å¤šç”¨æˆ¶åŒæ™‚æ‰¹æ¬¡è™•ç†
- **æœƒè©±éæœŸæ™‚é–“**: 10 åˆ†é˜
- **API å‚™ç”¨åˆ‡æ›æ™‚é–“**: <1 ç§’ (è‡ªå‹•ç„¡ç¸«åˆ‡æ›) ğŸ†•

## ğŸ”„ æœªä¾†æ”¹é€²æ–¹å‘

1. **åœ–ç‰‡å­˜å„²**: æ•´åˆå¤–éƒ¨åœ–ç‰‡å­˜å„²æœå‹™ (Cloudinary/AWS S3)
2. **è³‡æ–™é©—è­‰**: æ›´åš´æ ¼çš„æ¬„ä½æ ¼å¼é©—è­‰
3. **éŒ¯èª¤é‡è©¦**: è‡ªå‹•é‡è©¦å¤±æ•—çš„è™•ç†
4. **ä½¿ç”¨åˆ†æ**: æ·»åŠ ä½¿ç”¨çµ±è¨ˆå’Œåˆ†æ
5. **å¤šèªè¨€æ”¯æ´**: æ”¯æ´æ›´å¤šèªè¨€çš„åç‰‡è­˜åˆ¥

## ğŸ“ é–‹ç™¼æ—¥èªŒ

### 2025-08-01
- âœ… **ğŸ†• å¯¦ä½œå®Œæ•´å¤šåç‰‡è­˜åˆ¥èˆ‡å“è³ªæ§åˆ¶ç³»çµ±**
  - å»ºç«‹ `multi_card_processor.py` å¤šåç‰‡è™•ç†å”èª¿å™¨
  - å»ºç«‹ `user_interaction_handler.py` ç”¨æˆ¶äº¤äº’æœƒè©±ç®¡ç†
  - å¢å¼· `name_card_processor.py` æ”¯æ´å¤šåç‰‡æª¢æ¸¬å’Œå“è³ªè©•ä¼°
  - æ•´åˆ LINE Bot (`app.py`) å®Œæ•´å¤šåç‰‡è™•ç†æµç¨‹
  - å¯¦ä½œæ™ºèƒ½æ±ºç­–ï¼šè‡ªå‹•è™•ç† vs ç”¨æˆ¶é¸æ“‡ vs é‡æ–°æ‹æ”
- âœ… **ğŸ§ª å»ºç«‹å®Œæ•´æ¸¬è©¦ç³»çµ±**
  - å‰µå»º `test_multi_card_processor.py` ç¶œåˆæ¸¬è©¦å¥—ä»¶
  - å–®å…ƒæ¸¬è©¦ï¼šåç‰‡æª¢æ¸¬ã€å“è³ªè©•ä¼°ã€ç”¨æˆ¶äº¤äº’ã€æœƒè©±ç®¡ç†
  - æ•´åˆæ¸¬è©¦ï¼šå®Œæ•´å·¥ä½œæµç¨‹é©—è­‰
  - æ¸¬è©¦è¦†è“‹ç‡ï¼š100% (17/17 æ¸¬è©¦é€šé)
- âœ… **ğŸ¯ ç”¨æˆ¶é«”é©—å„ªåŒ–**
  - æ™ºèƒ½å“è³ªè©•ä¼°ï¼šä¿¡å¿ƒåº¦è¨ˆç®—ã€å¿…è¦æ¬„ä½æª¢æŸ¥ã€æ¸…æ™°åº¦åˆ†æ
  - å‹å¥½çš„ç”¨æˆ¶é¸æ“‡ç•Œé¢ï¼šæ”¯æ´æ•¸å­—å’Œæ–‡å­—é¸æ“‡
  - æœƒè©±ç®¡ç†ï¼š5åˆ†é˜è¶…æ™‚ã€è‡ªå‹•æ¸…ç†ã€é‡è©¦æ©Ÿåˆ¶
  - æ‹æ”å»ºè­°ï¼šå…·é«”çš„æ”¹å–„æç¤ºå’ŒæŠ€å·§æŒ‡å°
- âœ… **ğŸ”„ å¯¦ä½œ Gemini API å‚™ç”¨æ©Ÿåˆ¶** ğŸ†•
  - å»ºç«‹é›™ API Key é…ç½®ç³»çµ± (`GOOGLE_API_KEY_FALLBACK`)
  - å¯¦ä½œæ™ºèƒ½éŒ¯èª¤æª¢æ¸¬å’Œè‡ªå‹•åˆ‡æ›é‚è¼¯
  - å‰µå»º `test_api_fallback.py` å®Œæ•´æ¸¬è©¦å¥—ä»¶
  - ç¢ºä¿ç„¡ç¸«ç”¨æˆ¶é«”é©—ï¼šé¡åº¦ä¸è¶³æ™‚è‡ªå‹•åˆ‡æ›åˆ°å‚™ç”¨ API
  - å®Œå–„éŒ¯èª¤è™•ç†ï¼šè©³ç´°çš„éŒ¯èª¤ä¿¡æ¯å’Œç‹€æ…‹è¿½è¹¤
- âœ… **ğŸ“‹ Agent å”ä½œé–‹ç™¼æ¨¡å¼å¯¦è¸**
  - AI Engineerï¼šå¤šåç‰‡æª¢æ¸¬å’Œå“è³ªè©•ä¼°æ ¸å¿ƒé‚è¼¯
  - UX Researcherï¼šç”¨æˆ¶äº¤äº’ç•Œé¢å’Œé«”é©—è¨­è¨ˆ
  - Backend Architectï¼šç³»çµ±æ¶æ§‹å’Œ LINE Bot æ•´åˆ
  - Test Writer/Fixerï¼šå®Œæ•´æ¸¬è©¦å¥—ä»¶å’Œå“è³ªé©—è­‰

### 2025-07-29
- âœ… è¨­ç½® ZEABUR_TOKEN ä¸¦æº–å‚™éƒ¨ç½² ğŸš€
- âœ… å¯¦ä½œå‹å–„çš„æ–°ç”¨æˆ¶æ­¡è¿åŠŸèƒ½
- âœ… æ·»åŠ  FollowEvent è™•ç†å™¨ï¼Œæ­¡è¿é—œæ³¨ Bot çš„ç”¨æˆ¶
- âœ… å¢å¼· help æŒ‡ä»¤ï¼Œæä¾›è©³ç´°ä½¿ç”¨æŒ‡å—
- âœ… å„ªåŒ–æ‰¹æ¬¡è™•ç†æ¨¡å¼çš„ç”¨æˆ¶é«”é©—
- âœ… **æ•´åˆ GitHub Actions CI/CD Pipeline**
- âœ… **å¯¦ä½œ Claude Code AI è‡ªå‹•åŒ– workflow**
- âœ… **å‰µå»ºè‡ªå‹• PR ç”Ÿæˆå’Œ Issue è½‰ä»£ç¢¼åŠŸèƒ½**
- âœ… **å®Œå–„æ¸¬è©¦ã€ä»£ç¢¼å“è³ªæª¢æŸ¥ã€å®‰å…¨æƒææµç¨‹**
- âœ… **æ›´æ–°å°ˆæ¡ˆæ–‡æª”å’Œé…ç½®æŒ‡å—**
- âœ… **ğŸ†• å¯¦ä½œåœ°å€æ­£è¦åŒ–åŠŸèƒ½**
  - å‰µå»º `address_normalizer.py` åœ°å€æ¨™æº–åŒ–æ¨¡çµ„
  - æ•´åˆå°ç£åœ°å€æ­£è¦åŒ–åˆ°åç‰‡è™•ç†æµç¨‹
  - ç¸£å¸‚åç¨±çµ±ä¸€åŒ– (å°åŒ— â†’ å°åŒ—å¸‚)
  - å€åŸŸåç¨±æ¨™æº–åŒ– (ä¿¡ç¾© â†’ ä¿¡ç¾©å€)
  - é“è·¯æ®µæ•¸ä¸­æ–‡åŒ– (5æ®µ â†’ äº”æ®µ)
  - æ¨“å±¤æ ¼å¼çµ±ä¸€ (1F â†’ 1æ¨“, B1 â†’ åœ°ä¸‹1æ¨“)
  - åœ°å€ä¿¡å¿ƒåº¦è©•ä¼°å’Œè­¦å‘Šç³»çµ±
  - Notion é é¢åœ°å€è™•ç†è©³æƒ…å±•ç¤º
  - å®Œæ•´æ¸¬è©¦å¥—ä»¶ (`test_address_normalizer.py`)

### 2025-07-28
- âœ… å¯¦ä½œåŸºæœ¬åç‰‡è­˜åˆ¥åŠŸèƒ½
- âœ… æ•´åˆ Notion è³‡æ–™åº«å­˜å„²
- âœ… æ·»åŠ éƒ¨é–€æ¬„ä½æ”¯æ´
- âœ… å¯¦ä½œæ‰¹æ¬¡è™•ç†æ¨¡å¼
- âœ… ä¿®å¾© Notion æ¬„ä½é¡å‹å•é¡Œ
- âœ… å®Œå–„åœ–ç‰‡è™•ç†è³‡è¨Šè¨˜éŒ„

## ğŸ¤ å”ä½œè³‡è¨Š

- **é–‹ç™¼è€…**: Claude (Anthropic AI Assistant)
- **å”ä½œæ–¹å¼**: é€é Claude Code é€²è¡Œäº’å‹•å¼é–‹ç™¼
- **ç‰ˆæœ¬æ§åˆ¶**: Git + GitHubï¼Œæ•´åˆ GitHub Actions è‡ªå‹•åŒ–
- **AI è¼”åŠ©é–‹ç™¼**: Claude Code GitHub Actions æ™ºèƒ½ PR å‰µå»º
- **éƒ¨ç½²å¹³å°**: Railway/Heroku ç­‰é›²ç«¯å¹³å°
- **CI/CD**: GitHub Actions è‡ªå‹•åŒ–æ¸¬è©¦ã€å»ºæ§‹ã€éƒ¨ç½²

### ğŸ› ï¸ é–‹ç™¼å·¥ä½œæµç¨‹
1. **åŠŸèƒ½é–‹ç™¼**: å‰µå»º GitHub Issue æè¿°éœ€æ±‚
2. **AI è‡ªå‹•å¯¦ç¾**: æ¨™è¨˜ `claude-code` æˆ–è©•è«– `@claude-code`
3. **è‡ªå‹•åŒ–è™•ç†**: Claude Code AI è‡ªå‹•å‰µå»º PR
4. **ä»£ç¢¼å¯©æŸ¥**: äººå·¥æª¢æŸ¥ AI ç”Ÿæˆçš„ä»£ç¢¼
5. **CI/CD æµç¨‹**: åˆä½µå¾Œè‡ªå‹•æ¸¬è©¦å’Œéƒ¨ç½²

### ğŸ”§ å¿«é€Ÿé–‹å§‹æŒ‡å—
```bash
# 1. Clone å°ˆæ¡ˆ
git clone [repository-url]
cd namecard

# 2. ç’°å¢ƒè¨­ç½®
cp .env.example .env
# ç·¨è¼¯ .env å¡«å…¥ API keys

# 3. å®‰è£ä¾è³´
pip install -r requirements.txt

# 4. æœ¬åœ°æ¸¬è©¦
python test_new_webhook.py
python app.py

# 5. é–‹ç™¼æ–°åŠŸèƒ½ (ä½¿ç”¨ AI)
# å‰µå»º GitHub Issue â†’ æ¨™è¨˜ claude-code â†’ AI è‡ªå‹•å¯¦ç¾
```

---

> ğŸ“Œ **é‡è¦æé†’**: 
> - **GitHub Secrets**: ç¢ºä¿åœ¨ Repository Settings ä¸­è¨­ç½®æ‰€æœ‰å¿…è¦çš„ API Keys
> - **ngrok æ›´æ–°**: æ¯æ¬¡é‡æ–°å•Ÿå‹• ngrok éƒ½éœ€è¦æ›´æ–° LINE Webhook URL
> - **API é…é¡**: å®šæœŸæª¢æŸ¥å„ API çš„ä½¿ç”¨é…é¡å’Œé™åˆ¶
> - **å®‰å…¨æ€§**: é¿å…åœ¨ä»£ç¢¼ä¸­ç›´æ¥å¯«å…¥å¯†é‘°ï¼Œä½¿ç”¨ç’°å¢ƒè®Šæ•¸
> - **Claude Code**: åˆ©ç”¨ AI è‡ªå‹•åŒ–åŠŸèƒ½å¯å¤§å¹…æå‡é–‹ç™¼æ•ˆç‡
> - **CI/CD**: æ¨é€ä»£ç¢¼æ™‚æœƒè‡ªå‹•è§¸ç™¼æ¸¬è©¦ï¼Œç¢ºä¿ä»£ç¢¼å“è³ª

## ğŸš€ Claude Code AI é–‹ç™¼å„ªå‹¢

- **ğŸ¤– æ™ºèƒ½é–‹ç™¼**: ç”¨è‡ªç„¶èªè¨€æè¿°éœ€æ±‚ï¼ŒAI è‡ªå‹•ç”Ÿæˆå®Œæ•´åŠŸèƒ½
- **âš¡ å¿«é€Ÿè¿­ä»£**: å¾ Issue åˆ° PR åªéœ€å¹¾åˆ†é˜
- **ğŸ§ª è‡ªå‹•æ¸¬è©¦**: AI ç”Ÿæˆçš„ä»£ç¢¼åŒ…å«åŸºæœ¬æ¸¬è©¦é©—è­‰
- **ğŸ“ å®Œæ•´æ–‡æª”**: è‡ªå‹•ç”Ÿæˆ PR æè¿°å’ŒæŠ€è¡“æ–‡æª”
- **ğŸ”„ æŒçºŒæ•´åˆ**: èˆ‡ç¾æœ‰ CI/CD æµç¨‹ç„¡ç¸«æ•´åˆ

## ğŸ¤– å°ˆæ¥­ Agent å”ä½œç³»çµ±

### Agent ä»»å‹™åˆ†ææ©Ÿåˆ¶
æ”¶åˆ°ä»»å‹™æ™‚ï¼ŒClaude æœƒè‡ªå‹•é€²è¡Œä»¥ä¸‹åˆ†ææµç¨‹ï¼š

1. **ä»»å‹™é¡å‹è­˜åˆ¥**
   - ç”¢å“é–‹ç™¼ â†’ **Product Agents**
   - å°ˆæ¡ˆç®¡ç† â†’ **Project Management Agents**
   - æ¸¬è©¦ç›¸é—œ â†’ **Testing Agents**
   - è¨­è¨ˆéœ€æ±‚ â†’ **Design Agents**
   - å·¥ç¨‹å¯¦ä½œ â†’ **Engineering Agents**

2. **æ™ºèƒ½ Agent é¸æ“‡**
   ```
   ä»»å‹™: "å„ªåŒ–åç‰‡è­˜åˆ¥çš„æº–ç¢ºç‡"
   â†“ åˆ†æçµæœ
   - ä¸»å° Agent: AI Engineer (æ ¸å¿ƒå¯¦ä½œ)
   - å”ä½œ Agent: Test Writer/Fixer (æ¸¬è©¦é©—è­‰)
   - æ”¯æ´ Agent: Performance Benchmarker (æ•ˆèƒ½è©•ä¼°)
   ```

3. **å¤š Agent å”ä½œæµç¨‹**
   - **Phase 1**: éœ€æ±‚åˆ†æ (Product/UX Agents)
   - **Phase 2**: æŠ€è¡“è¨­è¨ˆ (Engineering Agents)
   - **Phase 3**: å¯¦ä½œé–‹ç™¼ (å°ˆæ¥­ Engineering Agents)
   - **Phase 4**: æ¸¬è©¦é©—è­‰ (Testing Agents)
   - **Phase 5**: éƒ¨ç½²ç›£æ§ (DevOps Agents)

### å¯ç”¨å°ˆæ¥­ Agents

#### ğŸ¯ ç”¢å“ç›¸é—œ Agents
- **Feedback Synthesizer** - ç”¨æˆ¶å›é¥‹åˆ†æï¼Œæ”¹é€²ç”¢å“æ–¹å‘
- **Sprint Prioritizer** - åŠŸèƒ½å„ªå…ˆç´šæ’åºï¼Œæ•æ·é–‹ç™¼è¦åŠƒ
- **Trend Researcher** - å¸‚å ´è¶¨å‹¢åˆ†æï¼Œç«¶å“ç ”ç©¶

#### ğŸ“‹ å°ˆæ¡ˆç®¡ç† Agents  
- **Experiment Tracker** - A/B æ¸¬è©¦ç®¡ç†ï¼Œæ•¸æ“šè¿½è¹¤
- **Project Shipper** - ç™¼å¸ƒæµç¨‹ç®¡ç†ï¼Œä¸Šç·šæª¢æŸ¥æ¸…å–®
- **Studio Producer** - æ•´é«”å°ˆæ¡ˆå”èª¿ï¼Œè³‡æºåˆ†é…

#### ğŸ§ª æ¸¬è©¦ç›¸é—œ Agents
- **API Tester** - API æ¥å£æ¸¬è©¦ï¼Œè‡ªå‹•åŒ–æ¸¬è©¦å¥—ä»¶
- **Performance Benchmarker** - æ•ˆèƒ½åŸºæº–æ¸¬è©¦ï¼Œç“¶é ¸åˆ†æ
- **Test Results Analyzer** - æ¸¬è©¦çµæœåˆ†æï¼Œå“è³ªå ±å‘Š
- **Tool Evaluator** - é–‹ç™¼å·¥å…·è©•ä¼°ï¼ŒæŠ€è¡“é¸å‹
- **Workflow Optimizer** - é–‹ç™¼æµç¨‹å„ªåŒ–ï¼Œæ•ˆç‡æå‡

#### ğŸ¨ è¨­è¨ˆç›¸é—œ Agents
- **Brand Guardian** - å“ç‰Œä¸€è‡´æ€§æª¢æŸ¥ï¼Œè¨­è¨ˆè¦ç¯„
- **UI Designer** - ä½¿ç”¨è€…ç•Œé¢è¨­è¨ˆï¼Œäº’å‹•åŸå‹
- **UX Researcher** - ä½¿ç”¨è€…é«”é©—ç ”ç©¶ï¼Œå¯ç”¨æ€§æ¸¬è©¦
- **Visual Storyteller** - è¦–è¦ºæ•˜äº‹è¨­è¨ˆï¼Œå…§å®¹å‘ˆç¾
- **Whimsy Injector** - å‰µæ„å…ƒç´ ï¼Œè¶£å‘³æ€§å¢å¼·

#### âš™ï¸ å·¥ç¨‹ç›¸é—œ Agents
- **AI Engineer** - AI æ¨¡å‹å„ªåŒ–ï¼Œæ©Ÿå™¨å­¸ç¿’å¯¦ä½œ
- **Backend Architect** - å¾Œç«¯æ¶æ§‹è¨­è¨ˆï¼Œç³»çµ±æ“´å±•
- **DevOps Automator** - CI/CD æµç¨‹ï¼Œéƒ¨ç½²è‡ªå‹•åŒ–
- **Frontend Developer** - å‰ç«¯é–‹ç™¼ï¼Œä½¿ç”¨è€…ç•Œé¢å¯¦ä½œ
- **Mobile App Builder** - è¡Œå‹•æ‡‰ç”¨é–‹ç™¼ï¼Œè·¨å¹³å°æ–¹æ¡ˆ
- **Rapid Prototyper** - å¿«é€ŸåŸå‹é–‹ç™¼ï¼Œæ¦‚å¿µé©—è­‰
- **Test Writer/Fixer** - æ¸¬è©¦ç¨‹å¼ç¢¼æ’°å¯«ï¼ŒéŒ¯èª¤ä¿®å¾©

### Agent å”ä½œç¯„ä¾‹

#### ç¯„ä¾‹ 1: æ–°åŠŸèƒ½é–‹ç™¼
```
ä»»å‹™: "æ·»åŠ æ‰¹æ¬¡åç‰‡åŒ¯å‡º PDF åŠŸèƒ½"

Agent å”ä½œæµç¨‹:
1. Sprint Prioritizer â†’ åˆ†æåŠŸèƒ½å„ªå…ˆç´šå’Œå•†æ¥­åƒ¹å€¼
2. UX Researcher â†’ ç ”ç©¶ä½¿ç”¨è€…åŒ¯å‡ºéœ€æ±‚
3. UI Designer â†’ è¨­è¨ˆåŒ¯å‡ºç•Œé¢å’Œæµç¨‹
4. Backend Architect â†’ è¨­è¨ˆ PDF ç”Ÿæˆæ¶æ§‹
5. AI Engineer â†’ å„ªåŒ–æ‰¹æ¬¡è™•ç†æ•ˆèƒ½
6. Test Writer/Fixer â†’ æ’°å¯«è‡ªå‹•åŒ–æ¸¬è©¦
7. DevOps Automator â†’ é…ç½®éƒ¨ç½²æµç¨‹
```

#### ç¯„ä¾‹ 2: æ•ˆèƒ½å„ªåŒ–
```
ä»»å‹™: "å„ªåŒ– Gemini AI è­˜åˆ¥é€Ÿåº¦"

Agent å”ä½œæµç¨‹:
1. Performance Benchmarker â†’ å»ºç«‹æ•ˆèƒ½åŸºæº–æ¸¬è©¦
2. AI Engineer â†’ åˆ†ææ¨¡å‹æ•ˆèƒ½ç“¶é ¸
3. Backend Architect â†’ å„ªåŒ– API å‘¼å«æ¶æ§‹
4. Test Results Analyzer â†’ é©—è­‰å„ªåŒ–æ•ˆæœ
5. Experiment Tracker â†’ A/B æ¸¬è©¦ä¸åŒå„ªåŒ–æ–¹æ¡ˆ
```

#### ç¯„ä¾‹ 3: å“è³ªæå‡
```
ä»»å‹™: "æå‡åç‰‡è­˜åˆ¥æº–ç¢ºç‡"

Agent å”ä½œæµç¨‹:
1. Feedback Synthesizer â†’ åˆ†æç”¨æˆ¶å›é¥‹çš„è­˜åˆ¥å•é¡Œ
2. AI Engineer â†’ å„ªåŒ– Gemini æç¤ºå·¥ç¨‹
3. Test Writer/Fixer â†’ å»ºç«‹è­˜åˆ¥æº–ç¢ºç‡æ¸¬è©¦
4. Tool Evaluator â†’ è©•ä¼°å…¶ä»– AI æœå‹™é¸é …
5. Performance Benchmarker â†’ æ¯”è¼ƒä¸åŒæ–¹æ¡ˆæ•ˆèƒ½
```

### Agent è§¸ç™¼æ©Ÿåˆ¶

1. **è‡ªå‹•è§¸ç™¼**: æ ¹æ“šä»»å‹™é—œéµå­—è‡ªå‹•é¸æ“‡åˆé©çš„ Agents
2. **æ˜ç¢ºè«‹æ±‚**: å¯ä»¥æ˜ç¢ºæŒ‡å®šéœ€è¦çš„ Agent
   ```bash
   # ç¯„ä¾‹
   "è«‹ä½¿ç”¨ AI Engineer å’Œ Test Writer/Fixer ä¾†å„ªåŒ–åç‰‡è­˜åˆ¥"
   ```
3. **å”ä½œå»ºè­°**: Claude æœƒä¸»å‹•å»ºè­°æœ€é©åˆçš„ Agent çµ„åˆ

### é–‹ç™¼æŒ‡å°åŸå‰‡

**åœ¨æ”¶åˆ°ä»»å‹™æ™‚ï¼ŒClaude å¿…é ˆï¼š**
1. **ğŸ” ä»»å‹™åˆ†æ**: è­˜åˆ¥ä»»å‹™é¡å‹å’Œè¤‡é›œåº¦
2. **ğŸ¤– Agent é¸æ“‡**: é¸æ“‡æœ€é©åˆçš„å°ˆæ¥­ Agents
3. **ğŸ“‹ å”ä½œè¦åŠƒ**: åˆ¶å®š Agent å”ä½œæµç¨‹
4. **âš¡ åŸ·è¡Œç›£æ§**: ç¢ºä¿ Agents æœ‰æ•ˆå”ä½œ
5. **ğŸ“Š çµæœæ•´åˆ**: æ•´åˆå„ Agent çš„ç”¢å‡º

**Agent å”ä½œå„ªå…ˆç´šï¼š**
- **é«˜å„ªå…ˆç´š**: ç›´æ¥å½±éŸ¿æ ¸å¿ƒåŠŸèƒ½çš„ä»»å‹™
- **ä¸­å„ªå…ˆç´š**: æ”¹å–„ä½¿ç”¨é«”é©—çš„ä»»å‹™  
- **ä½å„ªå…ˆç´š**: å„ªåŒ–å’Œå¢å¼·å‹ä»»å‹™

é€™æ¨£çš„ Agent å”ä½œæ©Ÿåˆ¶èƒ½ç¢ºä¿æ¯å€‹ä»»å‹™éƒ½ç”±æœ€å°ˆæ¥­çš„ Agent è² è²¬ï¼Œæå‡é–‹ç™¼æ•ˆç‡å’Œç¨‹å¼ç¢¼å“è³ªã€‚